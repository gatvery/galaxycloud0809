const _0x48ba99=_0x1b7e;(function(_0x23bdcf,_0x3bb44e){const _0x50ae28=_0x1b7e,_0x276fa3=_0x23bdcf();while(!![]){try{const _0x19b655=-parseInt(_0x50ae28(0xf9))/0x1*(parseInt(_0x50ae28(0x180))/0x2)+-parseInt(_0x50ae28(0x14b))/0x3*(-parseInt(_0x50ae28(0x15d))/0x4)+parseInt(_0x50ae28(0x167))/0x5+-parseInt(_0x50ae28(0x13c))/0x6+-parseInt(_0x50ae28(0x189))/0x7*(-parseInt(_0x50ae28(0xfb))/0x8)+parseInt(_0x50ae28(0x164))/0x9*(parseInt(_0x50ae28(0x147))/0xa)+-parseInt(_0x50ae28(0x18f))/0xb;if(_0x19b655===_0x3bb44e)break;else _0x276fa3['push'](_0x276fa3['shift']());}catch(_0x3e0a1f){_0x276fa3['push'](_0x276fa3['shift']());}}}(_0x1f32,0x35b39));const express=require('express'),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x48ba99(0x12e)),{promisify}=require(_0x48ba99(0x158)),exec=promisify(require('child_process')[_0x48ba99(0x17f)]),{execSync}=require(_0x48ba99(0x100)),UPLOAD_URL=process[_0x48ba99(0x151)]['UPLOAD_URL']||'',PROJECT_URL=process['env'][_0x48ba99(0x112)]||'',AUTO_ACCESS=process[_0x48ba99(0x151)][_0x48ba99(0x177)]||![],FILE_PATH=process[_0x48ba99(0x151)][_0x48ba99(0xfa)]||_0x48ba99(0x13e),SUB_PATH=process[_0x48ba99(0x151)]['SUB_PATH']||_0x48ba99(0x176),PORT=process[_0x48ba99(0x151)][_0x48ba99(0x192)]||process[_0x48ba99(0x151)][_0x48ba99(0x178)]||0xbb8,UUID=process[_0x48ba99(0x151)][_0x48ba99(0x130)]||_0x48ba99(0x18b),NEZHA_SERVER=process[_0x48ba99(0x151)][_0x48ba99(0x10e)]||'',NEZHA_PORT=process['env'][_0x48ba99(0x12a)]||'',NEZHA_KEY=process[_0x48ba99(0x151)][_0x48ba99(0x15b)]||'',ARGO_DOMAIN=process['env'][_0x48ba99(0x144)]||'',ARGO_AUTH=process['env'][_0x48ba99(0x12d)]||'',ARGO_PORT=process[_0x48ba99(0x151)][_0x48ba99(0x15f)]||0x1f41,CFIP=process['env'][_0x48ba99(0x125)]||_0x48ba99(0x131),CFPORT=process['env'][_0x48ba99(0x10b)]||0x1bb,NAME=process[_0x48ba99(0x151)][_0x48ba99(0x174)]||_0x48ba99(0x197);!fs[_0x48ba99(0xfc)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x48ba99(0x105)](FILE_PATH+_0x48ba99(0x11c))):console[_0x48ba99(0x105)](FILE_PATH+'\x20already\x20exists');let npmPath=path[_0x48ba99(0x150)](FILE_PATH,_0x48ba99(0xf5)),phpPath=path[_0x48ba99(0x150)](FILE_PATH,_0x48ba99(0x139)),webPath=path[_0x48ba99(0x150)](FILE_PATH,_0x48ba99(0x14a)),botPath=path[_0x48ba99(0x150)](FILE_PATH,'bot'),subPath=path[_0x48ba99(0x150)](FILE_PATH,_0x48ba99(0x19f)),listPath=path[_0x48ba99(0x150)](FILE_PATH,_0x48ba99(0x104)),bootLogPath=path[_0x48ba99(0x150)](FILE_PATH,'boot.log'),configPath=path[_0x48ba99(0x150)](FILE_PATH,_0x48ba99(0x18a));function deleteNodes(){const _0x2f6d4d=_0x48ba99;try{if(!UPLOAD_URL)return;if(!fs[_0x2f6d4d(0xfc)](subPath))return;let _0x2a0a91;try{_0x2a0a91=fs['readFileSync'](subPath,_0x2f6d4d(0x12b));}catch{return null;}const _0x1c187d=Buffer[_0x2f6d4d(0x175)](_0x2a0a91,_0x2f6d4d(0xf3))[_0x2f6d4d(0x115)](_0x2f6d4d(0x12b)),_0x5089c3=_0x1c187d['split']('\x0a')['filter'](_0x1fff3e=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x2f6d4d(0x184)](_0x1fff3e));if(_0x5089c3[_0x2f6d4d(0xf4)]===0x0)return;return axios[_0x2f6d4d(0x154)](UPLOAD_URL+'/api/delete-nodes',JSON[_0x2f6d4d(0xf6)]({'nodes':_0x5089c3}),{'headers':{'Content-Type':'application/json'}})[_0x2f6d4d(0x172)](_0x55156a=>{return null;});}catch(_0x28e440){return null;}}function _0x1b7e(_0x28844e,_0x19a689){const _0x1f3287=_0x1f32();return _0x1b7e=function(_0x1b7eff,_0x59abf7){_0x1b7eff=_0x1b7eff-0xf0;let _0x10c05a=_0x1f3287[_0x1b7eff];return _0x10c05a;},_0x1b7e(_0x28844e,_0x19a689);}function cleanupOldFiles(){const _0x3f055f=_0x48ba99,_0x343daf=['web',_0x3f055f(0x123),_0x3f055f(0xf5),_0x3f055f(0x139),_0x3f055f(0x19f),_0x3f055f(0x14e)];_0x343daf[_0x3f055f(0x187)](_0x59f2ca=>{const _0x5abe4a=_0x3f055f,_0x4029fc=path[_0x5abe4a(0x150)](FILE_PATH,_0x59f2ca);fs[_0x5abe4a(0x101)](_0x4029fc,()=>{});});}app['get']('/',function(_0x5cc06a,_0x374571){const _0x3ddd69=_0x48ba99;_0x374571[_0x3ddd69(0x1a3)](_0x3ddd69(0x13a));});const config={'log':{'access':_0x48ba99(0x17d),'error':'/dev/null','loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x48ba99(0x140),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x48ba99(0x12c),'fallbacks':[{'dest':0xbb9},{'path':_0x48ba99(0x145),'dest':0xbba},{'path':_0x48ba99(0x13b),'dest':0xbbb},{'path':_0x48ba99(0x181),'dest':0xbbc}]},'streamSettings':{'network':_0x48ba99(0x15e)}},{'port':0xbb9,'listen':_0x48ba99(0x13f),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x48ba99(0x12c)},'streamSettings':{'network':_0x48ba99(0x15e),'security':_0x48ba99(0x12c)}},{'port':0xbba,'listen':_0x48ba99(0x13f),'protocol':_0x48ba99(0x140),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x48ba99(0x145)}},'sniffing':{'enabled':![],'destOverride':[_0x48ba99(0x199),_0x48ba99(0x117),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x48ba99(0x13f),'protocol':_0x48ba99(0x161),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x48ba99(0x13b)}},'sniffing':{'enabled':![],'destOverride':[_0x48ba99(0x199),_0x48ba99(0x117),_0x48ba99(0x103)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x48ba99(0x13f),'protocol':_0x48ba99(0x124),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x48ba99(0x12c),'wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':![],'destOverride':[_0x48ba99(0x199),_0x48ba99(0x117),_0x48ba99(0x103)],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x48ba99(0x16b),'tag':_0x48ba99(0x102)},{'protocol':'blackhole','tag':_0x48ba99(0x132)}]};fs[_0x48ba99(0x108)](path[_0x48ba99(0x150)](FILE_PATH,_0x48ba99(0x18a)),JSON[_0x48ba99(0xf6)](config,null,0x2));function getSystemArchitecture(){const _0xe13fcd=_0x48ba99,_0x49a382=os['arch']();return _0x49a382===_0xe13fcd(0x171)||_0x49a382===_0xe13fcd(0x19b)||_0x49a382===_0xe13fcd(0x133)?'arm':_0xe13fcd(0xf0);}function downloadFile(_0xd196e1,_0x1a20c0,_0x2f29f4){const _0x4bab4e=_0x48ba99,_0x46d97b=path['join'](FILE_PATH,_0xd196e1),_0x5e133f=fs[_0x4bab4e(0x11d)](_0x46d97b);axios({'method':_0x4bab4e(0x16d),'url':_0x1a20c0,'responseType':_0x4bab4e(0x1a0)})[_0x4bab4e(0x190)](_0x1ac948=>{const _0x589cb4=_0x4bab4e;_0x1ac948[_0x589cb4(0x11e)][_0x589cb4(0x16f)](_0x5e133f),_0x5e133f['on'](_0x589cb4(0x152),()=>{const _0x27bf59=_0x589cb4;_0x5e133f[_0x27bf59(0x11f)](),console[_0x27bf59(0x105)](_0x27bf59(0x179)+_0xd196e1+_0x27bf59(0xfd)),_0x2f29f4(null,_0xd196e1);}),_0x5e133f['on'](_0x589cb4(0x142),_0x4c0648=>{const _0x2212b9=_0x589cb4;fs[_0x2212b9(0x101)](_0x46d97b,()=>{});const _0x2e7f03=_0x2212b9(0x179)+_0xd196e1+_0x2212b9(0x14f)+_0x4c0648['message'];console[_0x2212b9(0x142)](_0x2e7f03),_0x2f29f4(_0x2e7f03);});})[_0x4bab4e(0x172)](_0x5959f3=>{const _0x385e52=_0x4bab4e,_0x271050=_0x385e52(0x179)+_0xd196e1+'\x20failed:\x20'+_0x5959f3[_0x385e52(0x1a4)];console['error'](_0x271050),_0x2f29f4(_0x271050);});}async function downloadFilesAndRun(){const _0xcf49d6=_0x48ba99,_0x4b065b=getSystemArchitecture(),_0x281656=getFilesForArchitecture(_0x4b065b);if(_0x281656[_0xcf49d6(0xf4)]===0x0){console[_0xcf49d6(0x105)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x40820f=_0x281656[_0xcf49d6(0x114)](_0x30857c=>{return new Promise((_0x1ae750,_0x5ee8cf)=>{const _0x5a887d=_0x1b7e;downloadFile(_0x30857c[_0x5a887d(0x1a5)],_0x30857c[_0x5a887d(0x14c)],(_0x4e2560,_0x5d8a47)=>{_0x4e2560?_0x5ee8cf(_0x4e2560):_0x1ae750(_0x5d8a47);});});});try{await Promise[_0xcf49d6(0x19a)](_0x40820f);}catch(_0x5d80d2){console[_0xcf49d6(0x142)](_0xcf49d6(0x166),_0x5d80d2);return;}function _0x23defb(_0x9de868){const _0x1815be=_0xcf49d6,_0x4848e6=0x1fd;_0x9de868[_0x1815be(0x187)](_0x1c5ad7=>{const _0x5976d9=_0x1815be,_0x58e2ef=path['join'](FILE_PATH,_0x1c5ad7);fs[_0x5976d9(0xfc)](_0x58e2ef)&&fs[_0x5976d9(0x113)](_0x58e2ef,_0x4848e6,_0x41c922=>{const _0x4aa34c=_0x5976d9;_0x41c922?console[_0x4aa34c(0x142)](_0x4aa34c(0xfe)+_0x58e2ef+':\x20'+_0x41c922):console[_0x4aa34c(0x105)](_0x4aa34c(0x18e)+_0x58e2ef+':\x20'+_0x4848e6[_0x4aa34c(0x115)](0x8));});});}const _0x2f910e=NEZHA_PORT?[_0xcf49d6(0x121),_0xcf49d6(0x136),'./bot']:[_0xcf49d6(0x194),'./web',_0xcf49d6(0x107)];_0x23defb(_0x2f910e);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4503bd=NEZHA_SERVER[_0xcf49d6(0x11b)](':')?NEZHA_SERVER['split'](':')[_0xcf49d6(0x16a)]():'',_0x24e5c9=new Set([_0xcf49d6(0x128),_0xcf49d6(0x141),_0xcf49d6(0x160),_0xcf49d6(0x120),'2083',_0xcf49d6(0x127)]),_0x23954d=_0x24e5c9[_0xcf49d6(0x1a6)](_0x4503bd)?_0xcf49d6(0xf1):_0xcf49d6(0x126),_0x5d05ca=_0xcf49d6(0x138)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20'+_0x23954d+_0xcf49d6(0x109)+UUID;fs['writeFileSync'](path['join'](FILE_PATH,_0xcf49d6(0x193)),_0x5d05ca);const _0x19575b=_0xcf49d6(0x129)+FILE_PATH+'/php\x20-c\x20\x22'+FILE_PATH+_0xcf49d6(0x186);try{await exec(_0x19575b),console[_0xcf49d6(0x105)](_0xcf49d6(0x188)),await new Promise(_0x17b485=>setTimeout(_0x17b485,0x3e8));}catch(_0x2593fd){console['error'](_0xcf49d6(0xf2)+_0x2593fd);}}else{let _0x3f50dd='';const _0x584c94=[_0xcf49d6(0x128),'8443',_0xcf49d6(0x160),_0xcf49d6(0x120),_0xcf49d6(0x156),_0xcf49d6(0x127)];_0x584c94[_0xcf49d6(0x11b)](NEZHA_PORT)&&(_0x3f50dd=_0xcf49d6(0x1a1));const _0x4364a7=_0xcf49d6(0x129)+FILE_PATH+_0xcf49d6(0x162)+NEZHA_SERVER+':'+NEZHA_PORT+_0xcf49d6(0x11a)+NEZHA_KEY+'\x20'+_0x3f50dd+'\x20>/dev/null\x202>&1\x20&';try{await exec(_0x4364a7),console['log']('npm\x20is\x20running'),await new Promise(_0x4be782=>setTimeout(_0x4be782,0x3e8));}catch(_0x279a7a){console['error'](_0xcf49d6(0x134)+_0x279a7a);}}}else console[_0xcf49d6(0x105)](_0xcf49d6(0x19c));const _0x21bbf2='nohup\x20'+FILE_PATH+_0xcf49d6(0x17a)+FILE_PATH+_0xcf49d6(0x1a2);try{await exec(_0x21bbf2),console['log'](_0xcf49d6(0x135)),await new Promise(_0x5b665b=>setTimeout(_0x5b665b,0x3e8));}catch(_0xfbce90){console['error'](_0xcf49d6(0x19e)+_0xfbce90);}if(fs[_0xcf49d6(0xfc)](path[_0xcf49d6(0x150)](FILE_PATH,_0xcf49d6(0x123)))){let _0x22a5f6;if(ARGO_AUTH[_0xcf49d6(0x185)](/^[A-Z0-9a-z=]{120,250}$/))_0x22a5f6=_0xcf49d6(0x10f)+ARGO_AUTH;else ARGO_AUTH[_0xcf49d6(0x185)](/TunnelSecret/)?_0x22a5f6='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+'/tunnel.yml\x20run':_0x22a5f6=_0xcf49d6(0x157)+FILE_PATH+_0xcf49d6(0x19d)+ARGO_PORT;try{await exec('nohup\x20'+FILE_PATH+_0xcf49d6(0x183)+_0x22a5f6+_0xcf49d6(0x198)),console[_0xcf49d6(0x105)](_0xcf49d6(0x106)),await new Promise(_0x467eed=>setTimeout(_0x467eed,0x7d0));}catch(_0x4430bd){console[_0xcf49d6(0x142)]('Error\x20executing\x20command:\x20'+_0x4430bd);}}await new Promise(_0x168fb1=>setTimeout(_0x168fb1,0x1388));}function getFilesForArchitecture(_0x3e7c81){const _0x3f1a28=_0x48ba99;let _0xb83afc;_0x3e7c81===_0x3f1a28(0x171)?_0xb83afc=[{'fileName':_0x3f1a28(0x14a),'fileUrl':_0x3f1a28(0x119)},{'fileName':_0x3f1a28(0x123),'fileUrl':'https://arm64.ssss.nyc.mn/2go'}]:_0xb83afc=[{'fileName':_0x3f1a28(0x14a),'fileUrl':_0x3f1a28(0x118)},{'fileName':_0x3f1a28(0x123),'fileUrl':'https://amd64.ssss.nyc.mn/2go'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x335e09=_0x3e7c81===_0x3f1a28(0x171)?_0x3f1a28(0x173):'https://amd64.ssss.nyc.mn/agent';_0xb83afc['unshift']({'fileName':_0x3f1a28(0xf5),'fileUrl':_0x335e09});}else{const _0x5a803d=_0x3e7c81==='arm'?_0x3f1a28(0x146):'https://amd64.ssss.nyc.mn/v1';_0xb83afc['unshift']({'fileName':'php','fileUrl':_0x5a803d});}}return _0xb83afc;}function argoType(){const _0x334219=_0x48ba99;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x334219(0x105)](_0x334219(0x15c));return;}if(ARGO_AUTH[_0x334219(0x11b)]('TunnelSecret')){fs['writeFileSync'](path['join'](FILE_PATH,_0x334219(0x18d)),ARGO_AUTH);const _0x566d75=_0x334219(0x16c)+ARGO_AUTH['split']('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0x334219(0x150)](FILE_PATH,_0x334219(0x18d))+_0x334219(0x12f)+ARGO_DOMAIN+_0x334219(0x110)+ARGO_PORT+_0x334219(0x169);fs[_0x334219(0x108)](path[_0x334219(0x150)](FILE_PATH,_0x334219(0x165)),_0x566d75);}else console[_0x334219(0x105)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}argoType();async function extractDomains(){const _0x582732=_0x48ba99;let _0x19cd00;if(ARGO_AUTH&&ARGO_DOMAIN)_0x19cd00=ARGO_DOMAIN,console[_0x582732(0x105)](_0x582732(0x196),_0x19cd00),await _0x496478(_0x19cd00);else try{const _0x32dfda=fs['readFileSync'](path[_0x582732(0x150)](FILE_PATH,'boot.log'),'utf-8'),_0x12ce6b=_0x32dfda['split']('\x0a'),_0x1a00fb=[];_0x12ce6b[_0x582732(0x187)](_0xe49c2c=>{const _0x158ce3=_0x582732,_0x52c0a9=_0xe49c2c['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x52c0a9){const _0x48fcc8=_0x52c0a9[0x1];_0x1a00fb[_0x158ce3(0x116)](_0x48fcc8);}});if(_0x1a00fb[_0x582732(0xf4)]>0x0)_0x19cd00=_0x1a00fb[0x0],console[_0x582732(0x105)](_0x582732(0x17b),_0x19cd00),await _0x496478(_0x19cd00);else{console[_0x582732(0x105)]('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs['unlinkSync'](path[_0x582732(0x150)](FILE_PATH,_0x582732(0x14e)));async function _0xbda353(){const _0x16b2b3=_0x582732;try{await exec(_0x16b2b3(0x137));}catch(_0x8315e6){}}_0xbda353(),await new Promise(_0x40f860=>setTimeout(_0x40f860,0xbb8));const _0x46bfee=_0x582732(0x157)+FILE_PATH+_0x582732(0x19d)+ARGO_PORT;try{await exec(_0x582732(0x129)+path[_0x582732(0x150)](FILE_PATH,_0x582732(0x123))+'\x20'+_0x46bfee+_0x582732(0x198)),console[_0x582732(0x105)]('bot\x20is\x20running.'),await new Promise(_0x310316=>setTimeout(_0x310316,0xbb8)),await extractDomains();}catch(_0x2dbec4){console[_0x582732(0x142)](_0x582732(0x182)+_0x2dbec4);}}}catch(_0x3487d9){console['error']('Error\x20reading\x20boot.log:',_0x3487d9);}async function _0x496478(_0xe25031){const _0x3ee526=_0x582732,_0x289e58=execSync('curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x3ee526(0x12b)}),_0x5f0f67=_0x289e58[_0x3ee526(0xff)]();return new Promise(_0x1b36b1=>{setTimeout(()=>{const _0x46de3d=_0x1b7e,_0x40b0ec={'v':'2','ps':NAME+'-'+_0x5f0f67,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0x46de3d(0x12c),'host':_0xe25031,'path':_0x46de3d(0x170),'tls':_0x46de3d(0x117),'sni':_0xe25031,'alpn':''},_0x59315b=_0x46de3d(0x155)+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0xe25031+'&type=ws&host='+_0xe25031+_0x46de3d(0x195)+NAME+'-'+_0x5f0f67+_0x46de3d(0x14d)+Buffer['from'](JSON['stringify'](_0x40b0ec))['toString'](_0x46de3d(0xf3))+_0x46de3d(0x15a)+UUID+'@'+CFIP+':'+CFPORT+_0x46de3d(0x149)+_0xe25031+_0x46de3d(0x13d)+_0xe25031+_0x46de3d(0x16e)+NAME+'-'+_0x5f0f67+'\x0a\x20\x20\x20\x20';console['log'](Buffer['from'](_0x59315b)[_0x46de3d(0x115)](_0x46de3d(0xf3))),fs[_0x46de3d(0x108)](subPath,Buffer[_0x46de3d(0x175)](_0x59315b)['toString'](_0x46de3d(0xf3))),console['log'](FILE_PATH+_0x46de3d(0xf7)),uplodNodes(),app['get']('/'+SUB_PATH,(_0x33219b,_0x3c12ad)=>{const _0x450fe3=_0x46de3d,_0x50c1fb=Buffer[_0x450fe3(0x175)](_0x59315b)[_0x450fe3(0x115)](_0x450fe3(0xf3));_0x3c12ad[_0x450fe3(0x17e)](_0x450fe3(0x159),'text/plain;\x20charset=utf-8'),_0x3c12ad[_0x450fe3(0x1a3)](_0x50c1fb);}),_0x1b36b1(_0x59315b);},0x7d0);});}}async function uplodNodes(){const _0x2e5959=_0x48ba99;if(UPLOAD_URL&&PROJECT_URL){const _0x20ba2a=PROJECT_URL+'/'+SUB_PATH,_0x4d8408={'subscription':[_0x20ba2a]};try{const _0x52be94=await axios[_0x2e5959(0x154)](UPLOAD_URL+'/api/add-subscriptions',_0x4d8408,{'headers':{'Content-Type':_0x2e5959(0x191)}});if(_0x52be94[_0x2e5959(0x153)]===0xc8)console[_0x2e5959(0x105)](_0x2e5959(0x168));else return null;}catch(_0x2b7708){if(_0x2b7708['response']){if(_0x2b7708[_0x2e5959(0x10d)][_0x2e5959(0x153)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x2e5959(0xfc)](listPath))return;const _0xa24032=fs['readFileSync'](listPath,_0x2e5959(0x12b)),_0x43458e=_0xa24032[_0x2e5959(0x122)]('\x0a')[_0x2e5959(0xf8)](_0x221b74=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x221b74));if(_0x43458e[_0x2e5959(0xf4)]===0x0)return;const _0x1dc4fb=JSON[_0x2e5959(0xf6)]({'nodes':_0x43458e});try{await axios['post'](UPLOAD_URL+'/api/add-nodes',_0x1dc4fb,{'headers':{'Content-Type':_0x2e5959(0x191)}});if(response[_0x2e5959(0x153)]===0xc8)console['log']('Subscription\x20uploaded\x20successfully');else return null;}catch(_0x5b10aa){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x16acdf=_0x1b7e,_0xbc3164=[bootLogPath,configPath,webPath,botPath,phpPath,npmPath];if(NEZHA_PORT)_0xbc3164['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0xbc3164['push'](phpPath);exec(_0x16acdf(0x111)+_0xbc3164[_0x16acdf(0x150)]('\x20')+_0x16acdf(0x143),_0x27905b=>{const _0x191ba7=_0x16acdf;console[_0x191ba7(0x163)](),console[_0x191ba7(0x105)](_0x191ba7(0x10c)),console[_0x191ba7(0x105)](_0x191ba7(0x148));});},0x15f90);}cleanFiles();function _0x1f32(){const _0x1dbf40=['./tmp','127.0.0.1','vless','8443','error','\x20>/dev/null\x202>&1','ARGO_DOMAIN','/vless-argo','https://arm64.ssss.nyc.mn/v1','10dpNtNr','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','?security=tls&sni=','web','108195BXzZWi','fileUrl','\x0a\x20\x20\x0avmess://','boot.log','\x20failed:\x20','join','env','finish','status','post','\x0avless://','2083','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','util','Content-Type','\x0a\x20\x20\x0atrojan://','NEZHA_KEY','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','4kQzbII','tcp','ARGO_PORT','2096','vmess','/npm\x20-s\x20','clear','596367YilVjK','tunnel.yml','Error\x20downloading\x20files:','1790750GYdFKX','Subscription\x20uploaded\x20successfully','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','pop','freedom','\x0a\x20\x20tunnel:\x20','get','&path=%2Ftrojan-argo%3Fed%3D2560#','pipe','/vmess-argo?ed=2560','arm','catch','https://arm64.ssss.nyc.mn/agent','NAME','from','sub','AUTO_ACCESS','PORT','Download\x20','/web\x20-c\x20','ArgoDomain:','listen','/dev/null','set','exec','218414WxfjLH','/trojan-argo','Error\x20executing\x20command:\x20','/bot\x20','test','match','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','forEach','php\x20is\x20running','2680958qUxKLv','config.json','ccbe9214-2ab0-44d2-bf95-8ced920cc2e4','https://oooo.serv00.net/add-url','tunnel.json','Empowerment\x20success\x20for\x20','3964092aZMDXe','then','application/json','SERVER_PORT','config.yaml','./php','&path=%2Fvless-argo%3Fed%3D2560#','ARGO_DOMAIN:','Vls','\x20>/dev/null\x202>&1\x20&','http','all','arm64','NEZHA\x20variable\x20is\x20empty,skip\x20running','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','web\x20running\x20error:\x20','sub.txt','stream','--tls','/config.json\x20>/dev/null\x202>&1\x20&','send','message','fileName','has','amd','true','php\x20running\x20error:\x20','base64','length','npm','stringify','/sub.txt\x20saved\x20successfully','filter','2diaOqc','FILE_PATH','8HcGohZ','existsSync','\x20successfully','Empowerment\x20failed\x20for\x20','trim','child_process','unlink','direct','quic','list.txt','log','bot\x20is\x20running','./bot','writeFileSync','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','http\x20server\x20is\x20running\x20on\x20port:','CFPORT','App\x20is\x20running','response','NEZHA_SERVER','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','rm\x20-rf\x20','PROJECT_URL','chmod','map','toString','push','tls','https://amd64.ssss.nyc.mn/web','https://arm64.ssss.nyc.mn/web','\x20-p\x20','includes','\x20is\x20created','createWriteStream','data','close','2087','./npm','split','bot','trojan','CFIP','false','2053','443','nohup\x20','NEZHA_PORT','utf-8','none','ARGO_AUTH','path','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','UUID','www.visa.com.sg','block','aarch64','npm\x20running\x20error:\x20','web\x20is\x20running','./web','pkill\x20-f\x20\x22[b]ot\x22\x20>\x20/dev/null\x202>&1','\x0aclient_secret:\x20','php','Hello\x20world!','/vmess-argo','268350YSeioC','&type=ws&host='];_0x1f32=function(){return _0x1dbf40;};return _0x1f32();}async function AddVisitTask(){const _0x19e46d=_0x48ba99;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x19e46d(0x105)]('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x483f6d=await axios[_0x19e46d(0x154)](_0x19e46d(0x18c),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x19e46d(0x191)}});console[_0x19e46d(0x105)]('automatic\x20access\x20task\x20added\x20successfully');}catch(_0x18ff60){console[_0x19e46d(0x142)]('添加URL失败:\x20'+_0x18ff60[_0x19e46d(0x1a4)]);}}async function startserver(){deleteNodes(),cleanupOldFiles(),await downloadFilesAndRun(),await extractDomains(),AddVisitTask();}startserver(),app[_0x48ba99(0x17c)](PORT,()=>console[_0x48ba99(0x105)](_0x48ba99(0x10a)+PORT+'!'));
